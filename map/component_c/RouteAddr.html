<div class="RouteAddressOuterBkg">
    <div class="RouteAddressTip"><span>请选择准确的起点或终点</span></div>
    <div class="RouteAddressInnerBkg">
        <!--wjp cmsads -->
        <div id="pos5" style="display:none"></div>
        <div id="RouteAddress_DIV0" class="##startPointClass##">          
          <div class="sel_body">
            <div class="sel_body_top" onclick="Instance('#guid#').showLst(0)">
              <div class="sel_body_title">
                <div class="sel_body_sign"></div>
                <div class="sel_body_name">起点：<b id="B_PointName0">##startPoint##</b></div>
              </div>
              <div id="RD_TOP_BUT0" class="sel_body_button">##startButton##</div>
            </div>
            <div class="sel_body_body" id="RADIV_BODY0">##startBody##</div>
          </div>          
        </div>
        <div id="RouteAddress_DIV1" class="##endPointClass##">          
          <div class="sel_body">
            <div class="sel_body_top" onclick="Instance('#guid#').showLst(1)">
              <div class="sel_body_title">
                <div class="sel_body_sign"></div>
                <div class="sel_body_name">终点：<b id="B_PointName1">##endPoint##</b></div>
              </div>
              <div id="RD_TOP_BUT1" class="sel_body_button">##endButton##</div>
            </div>
            <div class="sel_body_body" id="RADIV_BODY1">##endBody##</div>
          </div>          
        </div>
        <!--wjp cmsads -->
        <div id="pos6" style="display:none"></div>
    </div>
</div>
<script> 
function RouteAddr(){T.lang.Class.call(this);this.json=null;this.markersList=[];this.pointsList=[];this.markerDest=null;this.curPageIndex=[1,1];this.totalPage=[1,1];this.startName="";this.endName="";this.resCity=[0,0];this.resCount=[0,0];this.resType=[0,0];this.currentNull=[-1,-1];this.qInfo=[{n:"",c:0,u:0,x:0,y:0,t:-1},{n:"",c:0,u:0,x:0,y:0,t:-1}];this.ifNav=0;this.moPars={o:null,n1:0,n2:0};this.originCity_List;this.scrollPanel0=new baidu.ui.ScrollPanel({container:"RADiv_ResItem0",overflow:"overflow-y",autoUpdate:false});this.scrollPanel1=new baidu.ui.ScrollPanel({container:"RADiv_ResItem1",overflow:"overflow-y",autoUpdate:false});this.moreCityScrollPanel=new baidu.ui.ScrollPanel({container:"moreCity_scrollPanel",overflow:"overflow-y",autoUpdate:false});this.curSelectedIndex=-1}T.lang.inherits(RouteAddr,T.lang.Class,"RouteAddr");T.object.extend(RouteAddr.prototype,{render:function(m,w){this.originCity_List=w.result.city_list;w=this.parseJson(w);this.json=w;if(this.cinfo&&this.cinfo.isSingle==true){if(w.current_city&&w.current_city.sup_bus==0&&(w.result.type==13||w.result.type==24)){this.ifNav=1;var c=["<p style='margin:10px'>抱歉，该城市暂无公交路线查询功能<br />","您可以<a href='javascript:void(0)' onclick='Instance(\""+this.guid+"\").goDrv();return false;'>查看驾车路线</a>。</p>"];return c.join("")}}if(w.result&&w.result.if_nav&&w.result.if_nav==1&&(w.result.type==13||w.result.type==24)){this.ifNav=1;var c=["<div class='mapinfo_con'>","<p>暂不支持跨城市公交查询，抱歉。</P>","<p>您可尝试查看<a href='javascript:void(0)' onclick=\"Instance('"+this.guid+"').navigate();return false;\">驾车路线</a>。</p>","<div class='nr_suggest'>百度建议您：","<ul><li>看看地图当前城市是否有误，尝试更换城市</li>","<li>您可在地图上移动起点、终点，再次尝试</li>","<li>您可更换关键词再次尝试</li>","</ul></div>","<div id='route_tips' class='route_tips'>百度提醒您：如果您有任何意见和建议，请到<a id='mapComplaintCenter' target='_blank' onClick='addStat(STAT_TOUSU_LIST_BT)' href='http://tousu.baidu.com/map/add'>百度地图投诉中心</a>反馈。</div>","</div>"];window._addStat(551);return c.join("")}var y=w.content;var e=[],b=[],p=[e,b];var z=["sel_n","sel_n1","sel_y","sel_x","sel_x1"];var x=[-1,-1];var q=["",""];var v=["",""];window.contextMenu.getItem(0).enable();window.contextMenu.getItem(1).enable();this.tpCity=[w.current_city.code,w.current_city.code],tempCode=w.current_city.code;for(var t=0;t<2;t++){var l=null;if(t==0){if(w.result.start_city){this.tpCity[0]=w.result.start_city.code||w.result.start_city[0].code;tempCode=this.tpCity[0]}}else{if(w.result.end_city){this.tpCity[1]=w.result.end_city.code||w.result.end_city[0].code;tempCode=this.tpCity[1]}}if(t==0){l=y.start}if(t==1){l=y.end}if(w.result.count[t]>0&&w.result.city_list[t]!=1){if(w.result.type!=13&&w.result.type!=24){v[t]='<a href="javascript:void(0)" onclick="Instance(\''+this.guid+"').changeCity(this,"+t+');return false;">更换城市</a>'}p[t].push('<div id="RADiv_ResItem'+t+'" class="sel_body_body_div sel_body_resitem">');var g=[0,9];if(l.length<10){g[1]=l.length-1}p[t].push(this.makeListTable(t,g));if(w.result.count[t]>10){p[t].push('<div id="RADiv_PAGE'+t+'" style="height:20px;" class="sel_body_body_page"></div>');this.totalPage[t]=Math.ceil(w.result.count[t]/10);this.curPageIndex[t]=1}p[t].push("</div>");if(w.result.prio_flag[t]==1){x[t]=2;this.qInfo[t].n=l[0].name;this.qInfo[t].c=tempCode;this.qInfo[t].u=l[0].uid;var B=getPointByStr(parseGeo(l[0].geo).points);this.qInfo[t].x=B.lng;this.qInfo[t].y=B.lat;this.qInfo[t].t=l[0].poiType;this.markerDest=addDestPoi(B,l[0].name,t,true);q[t]=l[0].name;window.contextMenu.getItem(t).disable()}else{x[t]=0}}else{if(w.result.count[t]>0&&w.result.city_list[t]==1){v[t]='<a href="javascript:void(0)" onclick="Instance(\''+this.guid+"').changeCity(this,"+t+');return false;">更换城市</a>';p[t].push('<div id="DIV_CityList'+t+'" class="sel_body_body_div sel_body_citylist">');if(!(this.json.result.current_null&&this.json.result.current_null[t]==0)){p[t].push('<div style="margin-top:10px;">在<b>'+w.current_city.name+"</b>未找到相关地点。</div>")}p[t].push('<div style="margin-top:10px">在以下城市有结果，请选择城市：</div>');p[t].push('<div style="margin-top:10px">');p[t].push('<table cellspacing="0" cellpadding="0" border="0" align="left" width="100%" style="margin: 0px 0pt 8px;"><tr>');for(var u=0,r=0;u<(l.length>6?6:l.length);u++,r++){var s=l[u];var A=s.name;var a=s.code;var f=s.num;var d=A.length*2;var n=f.toString().length+2;var o=d+n;if(o<=12){p[t].push('<td width="33%" valign="top">')}else{if(r%3!=2){p[t].push('<td width="66%" valign="top" colspan="2">');r++}else{p[t].push("</tr><tr>");p[t].push('<td width="66%" valign="top" colspan="2">');p[t].push('<a href="javascript:void(0)" tid="selCity_'+u+'" class="hotcity" onclick="Instance(\''+this.guid+"')._changeCity("+t+", {code:'"+l[u].code+"', name:'"+l[u].name+"'});return false;\">"+l[u].name+"</a>("+l[u].num+")");p[t].push("</td>");r+=2;continue}}p[t].push('<a href="javascript:void(0)" class="hotcity" tid="selCity_'+u+'" onclick="Instance(\''+this.guid+"')._changeCity("+t+", {code:'"+l[u].code+"', name:'"+l[u].name+"'});return false;\">"+l[u].name+"</a>("+l[u].num+")</td>");if((r+1)%3==0){p[t].push("</tr><tr>")}}p[t].push("</tr></table></div>");if(w.result.city_list[t]==1&&w.result.count[t]>6){p[t].push('<div style="clear:both;margin-:10px"><a class="arrowLink" href="javascript:void(0)" onclick="Instance(\''+this.guid+"').showMoreCity("+t+',this);return false;">更多城市</a></div>')}p[t].push("</div>");x[t]=0}else{p[t].push('<div id="DIV_CityList'+t+'" style="zoom:1;">');p[t].push('<div style="margin-top:10px;margin-left:10px;">在<b>'+w.current_city.name+"</b>未找到相关地点。</div>");if(w.result.type!=13&&w.result.type!=24){p[t].push('<div style="margin-top:10px;margin-left:10px;">在全国也没有找到结果</div>')}p[t].push('<div style="margin-top:10px;margin-left:10px;">您可更换关键词再尝试。</div></div>');x[t]=3}}}if(x[1]==3&&x[0]==3){x[1]=4}if(x[1]==3&&x[0]==0){x[0]=1;x[1]=3}if((x[0]==0||x[0]==3)&&(x[1]==0||x[1]==3)){x[1]=1}m=m.replace(/##startPointClass##/,z[x[0]]);if(w.result.s_query){this.startName=w.result.s_query}else{this.startName=w.result.s_wd}if(w.result.type==24||w.result.type==29){var h=w.result.type==24?"Bus":"Drive";searchBox.setValue(h+"SearchSta",w.result.s_query||w.result.s_word||"");searchBox.setValue(h+"SearchEnd",w.result.e_query||w.result.e_word||"")}if(q[0]==""){m=m.replace(/##startPoint##/,T.string.subByte(this.startName,14,"..."))}else{m=m.replace(/##startPoint##/,T.string.subByte(q[0],14,"..."))}m=m.replace(/##startBody##/,p[0].join(""));m=m.replace(/##endPointClass##/,z[x[1]]);if(w.result.e_query){if(typeof(w.result.e_query)=="string"){this.endName=w.result.e_query}else{this.endName=w.result.e_query[0]}}else{if(typeof(w.result.e_wd)=="string"){this.endName=w.result.e_wd}else{this.endName=w.result.e_wd[0]}}if(q[1]==""){m=m.replace(/##endPoint##/,T.string.subByte(this.endName,14,"..."))}else{m=m.replace(/##endPoint##/,T.string.subByte(q[1],14,"..."))}m=m.replace(/##endBody##/,p[1].join(""));m=m.replace(/##startButton##/,v[0]);m=m.replace(/##endButton##/,v[1]);return m},initialize:function(){window.RouteAddrHash=this.guid;if(navigator.cookieEnabled&&T.cookie.get("showroutetip")!="1"){this.routeTip='<div id="ROUTE_CustomTip1" class="route_tip_con"><div class="route_tip">请您先选择准确的起终点<span onclick="Instance(\''+this.guid+"').removeTip({from:'user'})\"></span></div><div class=\"route_tip_shadow\"></div></div>";this.addTip()}if(this.ifNav==1){window.contextMenu.getItem(0).disable();window.contextMenu.getItem(1).disable();return}var f=this;f.setParsValue();if(T.G("RADiv_PAGE0")){var e=new Page("RADiv_PAGE0",function(h){var d=[(h-1)*10,h*10-1];if(f.resCount[0]<(d[1]+1)){d[1]=f.resCount[0]-1}if(T.G("RA_ResItem_0")){T.dom.remove(T.G("RA_ResItem_0"));T.dom.insertHTML(T.G("RADiv_ResItem0"),"AFTERBEGIN",f.makeListTable(0,d))}f.addMarkers(0,d,true);f.setRAStyle();f.adjustListHeight();T.G("RADiv_ResItem0").scrollTop=0;if(f.scrollPanel0){f.scrollPanel0.update()}f.curPageIndex[0]=h},{pagecap:5,pageCount:f.totalPage[0],page:f.curPageIndex[0]})}if(T.G("RADiv_PAGE1")){var c=new Page("RADiv_PAGE1",function(h){var d=[(h-1)*10,h*10-1];if(f.resCount[1]<(d[1]+1)){d[1]=f.resCount[1]-1}if(T.G("RA_ResItem_1")){T.dom.remove(T.G("RA_ResItem_1"));T.dom.insertHTML(T.G("RADiv_ResItem1"),"AFTERBEGIN",f.makeListTable(1,d))}f.addMarkers(1,d,true);f.setRAStyle();f.adjustListHeight();T.G("RADiv_ResItem1").scrollTop=0;if(f.scrollPanel1){f.scrollPanel1.update()}f.curPageIndex[1]=h},{pagecap:5,pageCount:f.totalPage[1],page:f.curPageIndex[1]})}f.setRAStyle();window.ifBindRAStyleOnResize=false;if(!window.ifBindRAStyleOnResize){T.on(window,"onresize",function(){if(ModelMgr.mainModel._className=="RouteAddr"){window.ifBindRAStyleOnResize=true;ModelMgr.mainModel.setRAStyle();f.adjustListHeight()}})}var a=[0,9];if(T.G("RouteAddress_DIV0").className=="sel_n"){f._highLightInput(0);if(this.json.content&&this.json.result.city_list[0]!=1&&this.json.content.start&&this.json.content.start.length>0){if(this.json.content.start.length<(a[1]+1)){a[1]=this.json.content.start.length-1}f.addMarkers(0,a);f.select(0,0);f._highLightInput(0)}}else{if(T.G("RouteAddress_DIV1").className=="sel_n"){f._highLightInput(1);if(this.json.content&&this.json.result.city_list[1]!=1&&this.json.content.end&&this.json.content.end.length>0){if(this.json.content.end.length<(a[1]+1)){a[1]=this.json.content.end.length-1}f.addMarkers(1,a);f.select(1,0);f._highLightInput(1)}}else{if(this.markerDest&&(T.G("RouteAddress_DIV0").className=="sel_x"||T.G("RouteAddress_DIV1").className=="sel_x")){setViewport([this.markerDest.getPoint()])}}}for(var b=0;b<2;b++){if(T.G("RouteAddress_DIV"+b).className=="sel_y"){var g=(b==0?this.json.content.start:this.json.content.end);if(g.length>0&&g[0].ifFromIW&&g[0].ifFromIW==1){T.rc(T.G("RD_TOP_BUT"+b),"sel_body_button");T.G("RD_TOP_BUT"+b).innerHTML=""}}}if(f.json.content){if(f.json.content.start&&f.json.content.start.length>0&&f.json.content.end&&f.json.content.end.length>0){addAdsContent(f.json,3)}}if(T.G("RouteAddress_DIV0").className=="sel_x"){f._highLightInput(0)}else{if(T.G("RouteAddress_DIV1").className=="sel_x"){f._highLightInput(1)}}},_highLightInput:function(a){var b=this;b.clearHighLightInput();if(a==0){if(switchTab._curSelIndex==1){T.ac(T.g("PoiSearchSpan"),"inputHighLight")}else{if(switchTab._curSelIndex==2){T.ac(T.g("BusSearchStaSpan"),"inputHighLight")}else{if(switchTab._curSelIndex==3){T.ac(T.g("DriveSearchStaSpan"),"inputHighLight")}}}}else{if(switchTab._curSelIndex==1){T.ac(T.g("PoiSearchSpan"),"inputHighLight")}else{if(switchTab._curSelIndex==2){T.ac(T.g("BusSearchEndSpan"),"inputHighLight")}else{if(switchTab._curSelIndex==3){T.ac(T.g("DriveSearchEndSpan"),"inputHighLight")}}}}},clearHighLightInput:function(){T.rc(T.g("PoiSearchSpan"),"inputHighLight");T.rc(T.g("BusSearchStaSpan"),"inputHighLight");T.rc(T.g("BusSearchEndSpan"),"inputHighLight");T.rc(T.g("DriveSearchStaSpan"),"inputHighLight");T.rc(T.g("DriveSearchEndSpan"),"inputHighLight")},adjustListHeight:function(){return;var b=T.G("RADIV_BODY0").childNodes[0].offsetHeight?T.G("RADIV_BODY0").childNodes[0].offsetHeight:0;var a=T.G("RADIV_BODY1").childNodes[0].offsetHeight?T.G("RADIV_BODY1").childNodes[0].offsetHeight:0;var d=b>a?T.G("RADIV_BODY0").childNodes[0]:T.G("RADIV_BODY1").childNodes[0];var f=T.G("adsImg5");var c=T.G("adsImg6");if(f){if(d.offsetHeight-34>0){d.style.height=d.offsetHeight-34+"px"}}if(c){if(d.offsetHeight-45>0){d.style.height=d.offsetHeight-45+"px"}}var g=T.G("adswd5");var e=T.G("adswd6");if(g){if(d.offsetHeight-24>0){d.style.height=d.offsetHeight-24+"px"}}if(e){if(d.offsetHeight-35>0){d.style.height=d.offsetHeight-35+"px"}}},unload:function(){this.clearHighLightInput();this.scrollPanel0=null;this.scrollPanel1=null;this.moreCityScrollPanel=null;this.removeTip()},getCMStart:function(a,b){ModelMgr.mainModel.getCMQuery(0,a,b)},getCMEnd:function(a,b){ModelMgr.mainModel.getCMQuery(1,a,b)},getCMQuery:function(i,j,b){var h=this;var d=j.content;h.qInfo[i].n=(d.name==""?"未知路段":d.name);h.qInfo[i].c=j.result.code;h.qInfo[i].u=0;h.qInfo[i].x=b.lng;h.qInfo[i].y=b.lat;h.qInfo[i].t=0;if(i==0){h.json.content.start=[{name:h.qInfo[i].n,poiType:h.qInfo[i].t,uid:h.qInfo[i].u,addr:"",geo:"1|"+b.lng+","+b.lat+";"+b.lng+","+b.lat+"|"+b.lng+","+b.lat,ifFromIW:1}];h.json.result.s_wd=h.qInfo[i].n;h.json.result.s_query=h.qInfo[i].n;h.json.result.total[0]=1;h.json.result.count[0]=1;if(h.json.result.current_null){h.json.result.current_null[0]=0}h.json.result.prio_flag[0]=1;h.json.result.city_list[0]=0}else{h.json.content.end=[{name:h.qInfo[i].n,poiType:h.qInfo[i].t,uid:h.qInfo[i].u,addr:"",geo:"1|"+b.lng+","+b.lat+";"+b.lng+","+b.lat+"|"+b.lng+","+b.lat,ifFromIW:1}];h.json.result.e_wd=h.qInfo[i].n;h.json.result.e_query=h.qInfo[i].n;h.json.result.total[1]=1;h.json.result.count[1]=1;if(h.json.result.current_null){h.json.result.current_null[1]=0}h.json.result.prio_flag[1]=1;h.json.result.city_list[1]=0}if(h.qInfo[1-i].n!=""){h.submit()}else{T.G("B_PointName"+i).innerHTML=T.string.subByte(h.qInfo[i].n,14,"...");h.markerDest=addDestPoi(b,h.qInfo[i].n,i,true);T.G("RouteAddress_DIV"+i).className="sel_y";T.G("RD_TOP_BUT"+i).innerHTML="";T.rc(T.G("RD_TOP_BUT"+i),"sel_body_button");h.clearMarkers();if(h.resType[1-i]==0){T.G("RouteAddress_DIV"+(1-i)).className="sel_n";var f=h.curPageIndex[1-i];var e=(f-1)*10+9;var g=h.json.content;var a=((1-i)==0?a=g.start:a=g.end);if(a.length<(e+1)){e=a.length-1}h.addMarkers(1-i,[(f-1)*10,e])}else{T.G("RouteAddress_DIV"+(1-i)).className="sel_x"}h.setRAStyle();window.contextMenu.getItem(i).disable()}},parseJson:function(j){var e=this.modelQuery.split("&");var b=false;for(var d=0,c=e.length;d<c;d++){if(e[d].indexOf("isSingle=true")==0){b=true;break}}if(b){if(!this.cinfo){this.cinfo={}}this.cinfo.isSingle=true;this.cinfo.kwn={};var a,k;for(var d=0,c=e.length;d<c;d++){var g=e[d].split("=");switch(g[0]){case"t":this.cinfo.t=g[1];break;case"name":this.cinfo.kwn.name=decodeURIComponent(g[1]);break;case"uid":this.cinfo.kwn.uid=g[1];break;case"poiType":this.cinfo.kwn.poiType=g[1];break;case"ptx":a=g[1];break;case"pty":k=g[1];break;case"req":this.cinfo.q=decodeURIComponent(g[1]);break;default:break}}this.cinfo.kwn.pt=new BMap.Point(a,k);this.cinfo.kwn.geo="1|"+a+","+k+";"+a+","+k+"|"+a+","+k+";";this.cinfo.kwn.ifFromIW=1}if(this.cinfo&&this.cinfo.isSingle==true){var h=this.cinfo.t;if(h==0){j.result.s_wd=j.result.wd;j.result.s_query=j.result.return_query;j.result.total=[j.result.total,1];j.result.count=[j.result.count,1];j.result.e_query=this.cinfo.kwn.name;j.result.current_null=[j.result.current_null,0];var f=j.content;j.content=[];j.content.start=f;j.content.end=[this.cinfo.kwn];j.result.prio_flag=[0,1];j.result.city_list=[j.result.city_list,0]}else{if(h==1){j.result.e_wd=j.result.wd;j.result.e_query=j.result.return_query;j.result.s_query=this.cinfo.kwn.name;j.result.total=[1,j.result.total];j.result.count=[1,j.result.count];j.result.current_null=[0,j.result.current_null];var f=j.content;j.content=[];j.content.end=f;j.content.start=[this.cinfo.kwn];j.result.prio_flag=[1,0];j.result.city_list=[0,j.result.city_list]}}}if(j.result.type==19){var f=j.content;j.content={start:[],end:[]};j.content.end=f[1];j.content.start=f[0]}if(!j.content){j.content={start:[],end:[]}}return j},setParsValue:function(){this.resCity=this.tpCity;for(var a=0;a<2;a++){if(this.json.result.count[a]>0){if(this.json.result.city_list[a]==0){if(this.json.result.prio_flag[a]==1){this.resType[a]=1}else{this.resType[a]=0}this.resCount[a]=this.json.result.count[a]}else{this.resType[a]=2}}else{this.resType[a]=3}}if(this.json.result.current_null){this.currentNull=this.json.result.current_null}},setRAStyle:function(){if(ModelMgr.mainModel._className!="RouteAddr"){return}if(T.G("RouteAddress_DIV0").className=="sel_n"){if(T.G("RADiv_ResItem0")){this.setListHeight("RADiv_ResItem0","RouteAddress_DIV0","RouteAddress_DIV1");if(this.scrollPanel0){if(!this.scrollPanel0.getMain()){this.scrollPanel0.render("RADiv_ResItem0")}else{this.scrollPanel0.update()}}}else{if(T.G("DIV_CityList0")){this.setListHeight("DIV_CityList0","RouteAddress_DIV0","RouteAddress_DIV1")}}}else{if(T.G("RouteAddress_DIV1").className=="sel_n"){if(T.G("RADiv_ResItem1")){this.setListHeight("RADiv_ResItem1","RouteAddress_DIV1","RouteAddress_DIV0");if(this.scrollPanel1){if(!this.scrollPanel1.getMain()){this.scrollPanel1.render("RADiv_ResItem1")}else{this.scrollPanel1.update()}}}else{if(T.G("DIV_CityList1")){this.setListHeight("DIV_CityList1","RouteAddress_DIV1","RouteAddress_DIV0")}}}}if(T.G("RouteAddress_DIV0").className=="sel_x"){this.setListHeight("DIV_CityList0","RouteAddress_DIV0","RouteAddress_DIV1")}else{if(T.G("RouteAddress_DIV1").className=="sel_x"){this.setListHeight("DIV_CityList1","RouteAddress_DIV1","RouteAddress_DIV0")}}},setListHeight:function(f,e,c){var a=getClientSize().height-142;var b=T.G(e).offsetHeight-T.G(f).offsetHeight;var d=a-b-T.G(c).offsetHeight-55;if(d<0){d=0}T.G(f).style.height=(d)+"px"},clearMarkers:function(){for(var a=0,b=this.markersList.length;a<b;a++){map.removeOverlay(this.markersList[a])}this.markersList=[];this.pointsList=[]},addMarkers:function(n,m,b){var p=this.json.content||[];var q=this;var o=null;n==0?o=p.start:o=p.end;q.clearMarkers();if(!o){return}for(var k=m[0];k<=m[1];k++){var j=parseGeo(o[k].geo);q.markersList.push(addSearchPoi(j.points,k-m[0],o[k].name,{type:"RouteAddrMarker"}));q.pointsList.push(getPointByStr(j.points))}var g=q.pointsList;if(q.markerDest){if(!((q.resCity[0]!=q.resCity[1]))){g.push(q.markerDest.point)}}if(map.mapType==BMAP_TYPE_DIMENSIONAL){var e=BMap.MapType[BMAP_TYPE_DIMENSIONAL].citys;var h=e[map.currentCity][1];var l=getPointsBounds(g);var a=getBitLevel(l);if(h.intersects(l)){if(a<=15){a=15}map.centerAndZoom(g[0],a)}else{maptypeCtrl.select(BMAP_TYPE_NORMAL);setViewport(g);add3DTip();setTimeout(function(){var c=T.G("DEM_CustomTip1");remove3DTip(c)},3000)}}else{setViewport(g)}if(q.pointsList.length==11){q.pointsList.pop()}var f=this.markersList;for(var k=m[0];k<=m[1];k++){(function(){var c=k;if(f[k-m[0]]){f[k-m[0]].addEventListener("click",function(){q.select(n,c);addStat(STAT_ROUTE_IW_OPEN)});f[k-m[0]].addEventListener("mouseover",function(){var d=c%10;if(q.curSelectedIndex!=d){q._selectIt(n,d)}});f[k-m[0]].addEventListener("mouseout",function(){var d=c%10;if(q.curSelectedIndex!=d){q._unSelectIt(n,d)}})}})()}},submit:function(){var d=this;var f=modelConfig.cityCode;var e=d.qInfo[0].c;var a=d.qInfo[1].c;if(d.json.result.type==24&&d.originCity_List==0){var b=d.cinfo.t;if(b==0){e=d.json.result.city.code;a=d.json.current_city.code}else{e=d.json.current_city.code;a=d.json.result.city.code}}if(e==a){f=e}if(d.json.result.type==13||d.json.result.type==23||d.json.result.type==24){if(d.json.result.type==23&&e!=a){go("nav&navtp=4&c="+f+"&sc="+e+"&ec="+a+"&sy=0&drag=0&sn=1$$$$"+d.qInfo[0].x+","+d.qInfo[0].y+"$$"+encodeURIComponent(d.qInfo[0].n)+"$$$$$$&en=1$$$$"+d.qInfo[1].x+","+d.qInfo[1].y+"$$"+encodeURIComponent(d.qInfo[1].n)+"$$$$$$&sq="+this.startName+"&eq="+this.endName,{cinfo:d.cinfo})}else{go("bt&bttp=4&sc="+e+"&ec="+a+"&c="+f+"&sn=1$$"+d.qInfo[0].u+"$$"+d.qInfo[0].x+","+d.qInfo[0].y+"$$"+encodeURIComponent(d.qInfo[0].n)+"$$$$$$&en=1$$"+d.qInfo[1].u+"$$"+d.qInfo[1].x+","+d.qInfo[1].y+"$$"+encodeURIComponent(d.qInfo[1].n)+"$$$$$$&sq="+encodeURIComponent(this.startName)+"&eq="+encodeURIComponent(this.endName),{cinfo:d.cinfo})}}else{go("nav&navtp=4&c="+f+"&sc="+e+"&ec="+a+"&sy=0&drag=0&sn=1$$$$"+d.qInfo[0].x+","+d.qInfo[0].y+"$$"+encodeURIComponent(d.qInfo[0].n)+"$$$$$$&en=1$$$$"+d.qInfo[1].x+","+d.qInfo[1].y+"$$"+encodeURIComponent(d.qInfo[1].n)+"$$$$$$&sq="+this.startName+"&eq="+this.endName,{cinfo:d.cinfo})}},itmSelect:function(g,f){var k=this;var j=k.json.content||[];var h=(g==0?h=j.start:h=j.end);k.qInfo[g].n=h[f].name;k.qInfo[g].c=this.resCity[g];k.qInfo[g].u=h[f].uid;var b=getPointByStr(parseGeo(h[f].geo).points);k.qInfo[g].x=b.lng;k.qInfo[g].y=b.lat;k.qInfo[g].t=h[f].poiType;T.G("B_PointName"+g).innerHTML=T.string.subByte(h[f].name,14,"...");k.markerDest=addDestPoi(b,h[f].name,g,true);if(f==0){addStat(STAT_ROUTE_SELECT_1)}else{if(f==1){addStat(STAT_ROUTE_SELECT_2)}}if(k.qInfo[1-g].n!=""){k.clearMarkers();if(k.markerDest){map.removeOverlay(k.markerDest);k.markerDest=null}k.submit()}else{T.G("RouteAddress_DIV"+g).className="sel_y";k.clearMarkers();if(k.resType[1-g]==0){T.G("RouteAddress_DIV"+(1-g)).className="sel_n";var i=k.curPageIndex[1-g];var e=(i-1)*10+9;var a=((1-g)==0?a=j.start:a=j.end);if(a.length<(e+1)){e=a.length-1}k.addMarkers(1-g,[(i-1)*10,e]);if(g==0){k.select(1,0);k._highLightInput(1)}else{k.select(0,0);k._highLightInput(0)}}else{if(k.resType[1-g]==2){T.G("RouteAddress_DIV"+(1-g)).className="sel_n";k._highLightInput(1-g)}else{T.G("RouteAddress_DIV"+(1-g)).className="sel_x"}}k.setRAStyle();k.adjustListHeight();window.contextMenu.getItem(g).disable()}},select:function(e,b,g){if(arguments.length>2){g=g||window.e;var a=g.srcElement||g.target;if(a.className=="selBtn"){return}}var i=this.json.content||[];var f=this;var h=null;e==0?h=i.start:h=i.end;map.closeInfoWindow();if(!h){return}if((f.resCity[0]!=f.resCity[1])&&f.markerDest){setViewport(f.pointsList)}this._showInfoWindow(h,e,b);if(this.curSelectedIndex!=-1){this._unSelectIt(e,this.curSelectedIndex)}this.curSelectedIndex=b%10;this._selectIt(e,b)},_showInfoWindow:function(k,i,h){var l=this;var j=k[h];var b="<span class='iw_poi_title' title='"+j.name+"'>"+T.string.subByte(j.name,25,"...")+"</span>";var f=[];var m="";if(j.addr&&j.addr!=""){if(j.poiType==POI_TYPE_NORMAL){m="地址: "+j.addr}else{if(j.poiType==POI_TYPE_BUSSTOP){m="途经公交车："+T.array.unique(j.addr.split(";")).join("; ")}else{if(j.poiType==POI_TYPE_SUBSTOP){m="途经地铁："+T.array.unique(j.addr.split(";")).join("; ")}}}}f.push("<div style='padding:11px 11px 6px 11px;line-height:20px;word-break:break-all'>"+m+"</div>");f.push("<div style='line-height:180%;margin-bottom:10px;'>");var g=(i==0?"选为起点":"选为终点");f.push("<div style='text-align:center;'><div class='selInfoWndBtn' onclick='Instance(\""+this.guid+'").itmSelect('+i+","+h+");addStat(STAT_ROUTE_IW_BTN);' onmouseover='Instance(\""+this.guid+"\")._selBtnOver(this)' onmousedown='Instance(\""+this.guid+"\")._selBtnDown(this)' onmouseout='Instance(\""+this.guid+"\")._selBtnOut(this)' />"+g+"</div>");f.push("</div>");var e=new BMap.InfoWindow(f.join(""),{title:b,height:0,width:280,margin:[0,0,0,0]});var a=h%10;e.addEventListener("close",function(){l._unSelectIt(i,a);l.curSelectedIndex=-1});this.markersList[a].openInfoWindow(e)},makeListTable:function(e,d,c){this.curSelectedIndex=-1;var g=null;if(c){g=c}else{if(e==0){g=this.json.content.start}if(e==1){g=this.json.content.end}}var f=[];f.push('<div id="RA_ResItem_'+e+'"><table border="0" cellspacing="0" cellpadding="0">');for(var b=d[0];b<=d[1];b++){f.push("<tr onmouseover=\"Instance('"+this.guid+"')._lstMouseOver(this, 0,"+e+", "+(b-d[0])+', event)" onmouseout="Instance(\''+this.guid+"')._lstMouseOut(this, 0,"+e+", "+(b-d[0])+', event)" onclick="Instance(\''+this.guid+"').select("+e+","+b+', event);addStat(STAT_ROUTE_IW_OPEN);"><th><div title="在图上显示该点" class="icon iconbg" id="no_'+e+"_"+(b-d[0]+1)+'"></div></th>');var a=(e==0)?"选为起点":"选为终点";f.push("<td>");f.push('<a href="javascript:void(0)">'+g[b].name+"</a>");if(g[b].addr&&g[b].addr!=""){f.push("<div>");if(g[b].poiType==POI_TYPE_NORMAL){f.push('<span style="color:#999">地址: '+g[b].addr+"</span>")}else{if(g[b].poiType==POI_TYPE_BUSSTOP){f.push('<span style="color:#999">途经公交车：</span>'+T.array.unique(g[b].addr.split(";")).join("; "))}else{if(g[b].poiType==POI_TYPE_SUBSTOP){f.push('<span style="color:#999">途经地铁：</span>'+T.array.unique(g[b].addr.split(";")).join("; "))}}}f.push("</div>")}f.push("</td>");f.push('<td style="vertical-align:middle;width:66px"><div tid="selBtn_'+e+"_"+b+'" class="selBtn" onclick="Instance(\''+this.guid+"').itmSelect("+e+","+b+');addStat(STAT_ROUTE_LIST_BTN);return false;" onmouseover="Instance(\''+this.guid+"')._selBtnOver(this)\" onmouseout=\"Instance('"+this.guid+"')._selBtnOut(this)\" onmousedown=\"Instance('"+this.guid+"')._selBtnDown(this)\">"+a+"</div></td>");f.push("</tr>")}f.push("</table></div>");return f.join("")},_selBtnOver:function(a){a.style.backgroundPosition="-156px -81px"},_selBtnOut:function(a){a.style.backgroundPosition="-87px -81px"},_selBtnDown:function(a){a.style.backgroundPosition="-226px -81px";a.style.fontWeight="bold"},_lstMouseOver:function(c,b,f,a,d){if(this.curSelectedIndex!=a){map.closeInfoWindow();this._selectIt(f,a)}},_selectIt:function(h,e){var g=this;var j;if(h==0){j=T.G("RA_ResItem_0").childNodes[0]}else{j=T.G("RA_ResItem_1").childNodes[0]}if(j){var f=j.rows[e];f.style.backgroundColor="#F4F4F4";var b=f.getElementsByTagName("td")[1];var c=b.childNodes[0];c.style.visibility="visible";var a=f.getElementsByTagName("th")[0];var i=a.childNodes[0];i.style.backgroundPosition=-e*24+"px -32px"}if(g.markersList.length>e){var d=new BMap.Icon(A_J_MARKER_NEWYEAR_IMG,A_J_MARKER_NEWYEAR_BLUE_SIZE,{offset:A_J_MARKER_NEWYEAR_BLUE_OFFSET,imageOffset:new BMap.Size(-(A_J_MARKER_BLUE_ICON_WID)*e,-A_J_MARKER_BLUE_ICON_Y),infoWindowOffset:A_J_MARKER_NEWYEAR_INFOWND_OFFSET});g.markersList[e].setIcon(d);g._setTop(g.markersList[e],true,true)}},_unSelectIt:function(h,e){var g=this;var j;if(h==0){j=T.G("RA_ResItem_0").childNodes[0]}else{j=T.G("RA_ResItem_1").childNodes[0]}if(j){var f=j.rows[e];f.style.backgroundColor="#ffffff";var b=f.getElementsByTagName("td")[1];var c=b.childNodes[0];c.style.visibility="";var a=f.getElementsByTagName("th")[0];var i=a.childNodes[0];i.style.backgroundPosition=-e*24+"px -64px"}if(g.markersList.length>e){var d=new BMap.Icon(A_J_MARKER_NEWYEAR_IMG,A_J_MARKER_NEWYEAR_RED_SIZE,{offset:A_J_MARKER_NEWYEAR_RED_OFFSET,imageOffset:new BMap.Size(-A_J_MARKER_RED_ICON_WID*e,-A_J_MARKER_ORANGE_ICON_Y),infoWindowOffset:A_J_MARKER_NEWYEAR_INFOWND_OFFSET});g.markersList[e].setIcon(d);g._setTop(g.markersList[e],false)}},_lstMouseOut:function(c,b,f,a,d){if(this.curSelectedIndex!=a){this._unSelectIt(f,a)}},_setTop:function(c,b,a){if(!c||!c.setTop){return}if(b&&!c._isTop&&c.iconDom&&c.iconDom.style){c._isTop=true;if(a){c.setTop(true,1000100)}else{c.setTop(true)}return}if(!b&&c.iconDom&&c.iconDom.style){delete c._isTop;c.setTop(false)}},showLst:function(g){var c=this;var f=(g==0?c.json.content.start:c.json.content.end);if(f&&f.length==1&&f[0].ifFromIW&&f[0].ifFromIW==1){return}var b=c.curPageIndex;var e=[T.G("RouteAddress_DIV0").className,T.G("RouteAddress_DIV1").className];if(g==0){if(e[0]=="sel_n"||e[0]=="sel_x"){return}if(e[0]=="sel_n1"||e[0]=="sel_y"||e[0]=="sel_x1"){T.G("B_PointName0").innerHTML=T.string.subByte(this.startName,14,"...");if(T.G("RouteAddress_DIV1").className=="sel_x"){T.G("RouteAddress_DIV1").className="sel_x1"}else{T.G("RouteAddress_DIV1").className="sel_n1"}c.clearMarkers();if(c.markerDest){map.removeOverlay(c.markerDest);c.markerDest=null}if(e[0]=="sel_y"){c.qInfo[0]={n:"",c:0,u:0,x:0,y:0,t:-1};c.resType[0]=0}if(c.json.result.count[0]<=0){T.G("RouteAddress_DIV0").className="sel_x"}else{T.G("RouteAddress_DIV0").className="sel_n";if(c.json.result.city_list[0]!=1){var a=(b[0]-1)*10+9;if(c.json.content.start.length<(a+1)){a=c.json.content.start.length-1}c.addMarkers(0,[(b[0]-1)*10,a])}}window.contextMenu.getItem(0).enable()}c._highLightInput(0)}else{if(e[1]=="sel_n"||e[1]=="sel_x"){return}if(e[1]=="sel_n1"||e[1]=="sel_y"||e[1]=="sel_x1"){T.G("B_PointName1").innerHTML=T.string.subByte(this.endName,14,"...");if(T.G("RouteAddress_DIV0").className=="sel_x"){T.G("RouteAddress_DIV0").className="sel_x1"}else{T.G("RouteAddress_DIV0").className="sel_n1"}c.clearMarkers();if(c.markerDest){map.removeOverlay(c.markerDest);c.markerDest=null}if(e[1]=="sel_y"){c.qInfo[1]={n:"",c:0,u:0,x:0,y:0,t:-1};c.resType[1]=0}if(c.json.result.count[1]<=0){T.G("RouteAddress_DIV1").className="sel_x"}else{T.G("RouteAddress_DIV1").className="sel_n";if(c.json.result.city_list[1]!=1){var a=(b[1]-1)*10+9;if(c.json.content.end.length<(a+1)){a=c.json.content.end.length-1}c.addMarkers(1,[(b[1]-1)*10,a])}}window.contextMenu.getItem(1).enable()}c._highLightInput(1)}c.setRAStyle();c.adjustListHeight();this.curSelectedIndex=-1},changeCity:function(e,a){var c=this;var g=getPosition(e);var f=T.G("MapInfo");var d=0;d=g.top+18-f.scrollTop;var b={left:30,height:320,top:d,ifAddrPage:true,echo:function(h){h.changed=1;h.name=decodeURIComponent(h.name);c._changeCity(a,h)}};selectCity(e,b)},_changeCity:function(b,d){if(b==0){var a="&nsetp=0&cn="+encodeURIComponent(d.name)+(d.changed==1?"":"&click=1");go("nse&c="+d.code+"&wd="+encodeURIComponent(this.startName)+"&src=5"+a,e)}else{var a="&nsetp=1&cn="+encodeURIComponent(d.name)+(d.changed==1?"":"&click=1");go("nse&c="+d.code+"&wd="+encodeURIComponent(this.endName)+"&src=5"+a,e)}var c=this;if(c.pop){c.pop.close();c.pop=null}function e(g){var f=g.result;var h=g.content;c.resCity[b]=g.current_city.code;if(f.count>0){if(f.city_list==0){c.resCount[b]=f.count;c.resType[b]=0}else{c.resCount[b]=0;c.resType[b]=2}}else{c.resCount[b]=0;c.resType[b]=3}c.json.result.city_list[b]=f.city_list;c.currentNull[b]=f.current_null;c._reSetPage(b,c.resType[b],g);c.setRAStyle();c.adjustListHeight();window.contextMenu.getItem(b).enable()}},_reSetPage:function(q,f,r){var s=[];var p=this;switch(f){case 0:if(r.result.type!=13&&r.result.type!=24){T.G("RD_TOP_BUT"+q).innerHTML='<a href="javascript:void(0)" onclick="Instance(\''+p.guid+"').changeCity(this,"+q+');return false;">更换城市</a>'}s.push('<div id="RADiv_ResItem'+q+'" class="sel_body_body_div sel_body_resitem">');var o=[0,9];if(r.content.length<10){o[1]=r.content.length-1}if(q==0){p.json.content.start=r.content}else{p.json.content.end=r.content}s.push(p.makeListTable(q,o));if(r.result.count>10){s.push('<div id="RADiv_PAGE'+q+'" style="height:20px;" class="sel_body_body_page"></div>');p.totalPage[q]=Math.ceil(r.result.count/10);p.curPageIndex[q]=1}s.push("</div>");T.G("RADIV_BODY"+q).innerHTML=s.join("");T.G("RouteAddress_DIV"+q).className="sel_n";var m=[0,9];if(r.content.length<(m[1]+1)){m[1]=r.content.length-1}p.addMarkers(q,m);break;case 2:if(r.result.type!=13&&r.result.type!=24){T.G("RD_TOP_BUT"+q).innerHTML='<a href="javascript:void(0)" onclick="Instance(\''+p.guid+"').changeCity(this,"+q+');return false;">更换城市</a>'}s.push('<div id="DIV_CityList'+q+'" class="sel_body_body_div sel_body_citylist">');if(!(r.result.current_null*1==0)){s.push('<div style="margin-top:10px;">在<b>'+r.current_city.name+"</b>未找到相关地点。</div>")}s.push('<div style="margin-top:10px">在以下城市有结果，请选择城市：</div>');s.push('<div style="margin-top:10px">');s.push('<table cellspacing="0" cellpadding="0" border="0" align="left" width="100%" style="margin: 0px 0pt 8px;"><tr>');for(var j=0,g=0;j<(r.content.length>6?6:r.content.length);j++,g++){var h=r.content[j];var b=h.name;var c=h.code;var l=h.num;var d=b.length*2;var a=l.toString().length+2;var e=d+a;if(e<=12){s.push('<td width="33%" valign="top">')}else{if(g%3!=2){s.push('<td width="66%" valign="top" colspan="2">');g++}else{s.push("</tr><tr>");s.push('<td width="66%" valign="top" colspan="2">');s.push('<a href="javascript:void(0)" class="hotcity" tid="selCity_'+j+'" onclick="Instance(\''+this.guid+"')._changeCity("+q+", {code:'"+r.content[j].code+"', name:'"+r.content[j].name+"'});return false;\">"+r.content[j].name+"</a>("+r.content[j].num+")");s.push("</td>");g+=2;continue}}s.push('<a href="javascript:void(0)" class="hotcity" tid="selCity_'+j+'" onclick="Instance(\''+this.guid+"')._changeCity("+q+", {code:'"+r.content[j].code+"', name:'"+r.content[j].name+"'});return false;\">"+r.content[j].name+"</a>("+r.content[j].num+")</td>");if((g+1)%3==0){s.push("</tr><tr>")}}s.push("</tr></table></div>");if(r.result.city_list==1&&r.result.count>6){s.push('<div style="clear:both;margin-:10px"><a class="arrowLink" href="javascript:void(0)" onclick="Instance(\''+this.guid+"').showMoreCity("+q+',this);return false;">更多城市</a></div>')}s.push("</div>");T.G("RADIV_BODY"+q).innerHTML=s.join("");T.G("RouteAddress_DIV"+q).className="sel_n";p.totalPage[q]=0;p.curPageIndex[q]=1;break;case 3:s.push('<div id="DIV_CityList'+q+'">');s.push('<div style="margin-top:10px;">在<b>'+r.current_city.name+"</b>未找到相关地点。</div>");s.push('<div style="margin-top:10px">在全国也没有找到结果</div></div>');T.G("RADIV_BODY"+q).innerHTML=s.join("");T.G("RouteAddress_DIV"+q).className="sel_x";p.totalPage[q]=0;p.curPageIndex[q]=1;break}if(f==0&&T.G("RADiv_PAGE"+q)){if(T.G("RADiv_PAGE"+q)){var n=new Page("RADiv_PAGE"+q,function(u){var t=[(u-1)*10,u*10-1];if(p.resCount[q]<(t[1]+1)){t[1]=p.resCount[q]-1}var k="RA_ResItem_"+q;var i="RADiv_ResItem"+q;if(T.G(k)){T.dom.remove(T.G(k));T.dom.insertHTML(T.G(i),"AFTERBEGIN",p.makeListTable(q,t))}p.addMarkers(q,t,true);p.setRAStyle();T.G("RADiv_ResItem"+q).scrollTop=0;if(q==0){if(p.scrollPanel0){p.scrollPanel0.update()}}else{if(p.scrollPanel1){p.scrollPanel1.update()}}p.curPageIndex[q]=u},{pagecap:5,pageCount:p.totalPage[q],page:p.curPageIndex[q]})}}},showMoreCity:function(a,d){var c=this;if(this.pop&&(this.pop.visible==true)){this.pop.hide();return}else{if(this.pop&&(this.pop.visible==false)){this.pop.show();return}}var b=(a==0?this.startName:this.endName);var e="";if(this.currentNull[a]==1){e=AID["中国"]}else{e=this.resCity[a]}go("cmc&c="+e+"&wd="+encodeURIComponent(b),function(f){c._showMCPopup(f,a,d)})},_showMCPopup:function(d,a,c){if(!d||d&&!d.content){return}var a=a;var b=this;this.curSelIndex=-1;var g=getPosition(c);var f=T.G("MapInfo");var e=g.top+18-f.scrollTop;this.pop=new Popup({title:"更多城市",content:b._getMoreCityListHtml(d,a),height:160,width:240,addDom:T.G("moreCityPop"),close:function(){b.pop=null}});this.pop.addConnectDom(T.G("moreCity1"));this.pop.render();this.moreCityScrollPanel.render("moreCity_scrollPanel");this.pop.getDom().style.left="12px";this.pop.getDom().style.top=e+"px";this.pop.getDom().id="more_city_popup"},_getMoreCityListHtml:function(f,k){var a=f.result;if(a.count<=0){return"没找到相关数据，抱歉。"}var n=a.city_type;var h=f.content;if(!h||h&&h.length<=0){return}var m=[];m.push("<div class='moreCity_wrapper'>");m.push("<div id='moreCity_scrollPanel' class='moreCity_scrollPanel'>");if(n==1){m.push("<ol class='mc_list2'>");var g=h[0].city;for(var d=0;d<g.length;d++){m.push("<li><a href='javascript:void(0)' onclick='Instance(\""+this.guid+'")._changeCity('+k+',{code:"'+g[d].code+'",name:"'+g[d].name+"\"});return false;'>"+g[d].name+"</a>("+g[d].num+")</li>")}m.push("</ol>")}else{m.push("<ol class='mc_list'>");for(var e=0;e<h.length;e++){m.push("<li><a id='prov_"+e+"' href='javascript:void(0)' onclick='return Instance(\""+this.guid+'").unfoldCityList('+e+", event)'>");m.push(h[e].province+"</a>("+h[e].num+")");var g=h[e].city;m.push("<ol id='cl_"+e+"'class='mc_list_city' style='display:none'>");for(var d=0,b=g.length;d<b;d++){m.push("<li><a href='javascript:void(0)' onclick='Instance(\""+this.guid+'")._changeCity('+k+',{code:"'+g[d].code+'",name:"'+g[d].name+"\"});return false;'>"+g[d].name+"</a>("+g[d].num+")</li>")}m.push("</ol></li>")}m.push("</ol>")}m.push("</div>");m.push("</div");return m.join("")},unfoldCityList:function(c,b){var a=T.G("cl_"+c);if(a&&a.style.display=="block"){this._hide(c)}else{this._hide(this.curSelIndex);this._show(c)}if(a.parentNode.parentNode.parentNode){a.parentNode.parentNode.parentNode.scrollTop=24*c;this.moreCityScrollPanel.update()}return false},_show:function(b){if(b==-1){return}var a=T.G("cl_"+b);T.ac(T.G("prov_"+b),"fold");a.style.display="block";this.curSelIndex=b},_hide:function(b){if(b==-1){return}var a=T.G("cl_"+b);T.rc(T.G("prov_"+b),"fold");a.style.display="none"},navigate:function(){var a=this;switchTab._ByClickTab=false;go("nav&c="+this.json.current_city.code+"&sc="+this.json.current_city.code+"&ec="+this.json.current_city.code+"&sn=2$$$$$$"+encodeURIComponent((this.json.result.s_wd||this.json.result.s_query))+"$$&en=2$$$$$$"+encodeURIComponent((this.json.result.e_wd||this.json.result.e_query))+"$$")},goDrv:function(){var f="";var b=1;var e=this.cinfo.kwn;if(e.poiType==POI_TYPE_BUSSTOP||e.poiType==POI_TYPE_SUBSTOP){b=0}switchTab._ByClickTab=false;var g=this.json.current_city.code;var a="&en=";if(this.cinfo.t==1){a="&sn="}f=a+b+"$$"+e.uid+"$$"+e.pt.lng+","+e.pt.lat+"$$"+e.name+"$$";var d="nse&c="+g+"&wd="+encodeURIComponent(this.json.result.wd)+"&isSingle=true&t="+this.cinfo.t+"&name="+encodeURIComponent(e.name)+"&uid="+e.uid+"&ptx="+e.pt.lng+"&pty="+e.pt.lat+"&poiType="+e.poiType+f;d=d+"&req="+encodeURIComponent(d);go(d,{cinfo:{q:d,c:g,isSingle:true,t:this.cinfo.t,kwn:{name:e.name,uid:e.uid,pt:e.pt,poiType:e.poiType}}})},removeTip:function(a){var b=T.G("ROUTE_CustomTip1");a=a||{};if(b&&b.parentNode){b.parentNode.removeChild(b)}if(a.from=="user"){T.cookie.set("showroutetip","1",{domain:window.location.hostname,expires:946080000000})}},addTip:function(){var a=getClientSize().width;if(sideBar.status=="open"){a-=310}if(this.routeTip){beforeEndHTML(document.body,this.routeTip)}T.G("ROUTE_CustomTip1").style.left=(a+235)/2+"px";if(map.fullScreenMode){T.G("ROUTE_CustomTip1").style.top="39px"}}});
</script>

