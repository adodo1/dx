<div>

</div>
<script>
function Fav(){T.lang.Class.call(this);_gl.oFav=this;this.infoError=0;this.curIndex=-1;this.inlist;this.favPostArr=[];this.pageSize=10;this.currentPageIndex=1;SyncMgr.current_tab_index=0}T.lang.inherits(Fav,T.lang.Class,"Fav");T.object.extend(Fav.prototype,{render:function(b,a){var c=this;window.FavState=1;SyncMgr.checkFav(function(){c.getFavData({type:c.getDTypeByTabIndex(SyncMgr.current_tab_index)})},this);return""},getFavData:function(a){var b=this;SyncMgr.download(function(c){_gl.favCloudData=_gl.processCloudData(c.content.data);b.goPage()},a)},show:function(a){},reset:function(){this.infoError=0;this.curIndex=-1},getDTypeByTabIndex:function(a){var b={0:"",1:"0",2:"1"};return b[a]},favTab:function(b){SyncMgr.current_tab_index=b.num;var a={0:STAT_FAV_CLICKALL,1:STAT_FAV_CLICKPOI,2:STAT_FAV_CLICKLINE};if(b.update){this.getFavData({type:this.getDTypeByTabIndex(b.num)})}else{addStat(a[b.num])}},setFavPostData:function(d){if(SyncMgr.current_tab_index==0&&(!d||d.length==0)){_gl.clearFavInfo();return}var c=[];c.push(['<div class="favSign" id="JfavSign"><div id="J_favTab">','<span id="fffs0" onclick="M.fe.tab({dom:this,num:0,mid:\'favTab\',nameSpace:_gl.oFav,update:true})">全部</span>','<span id="fffs1" onclick="M.fe.tab({dom:this,num:1,mid:\'favTab\',nameSpace:_gl.oFav,update:true})">地点</span>','<span id="fffs2" onclick="M.fe.tab({dom:this,num:2,mid:\'favTab\',nameSpace:_gl.oFav,update:true})">路线</span>',"</div><ul>"].join(""));c.push(this.getListHtml(d));c.push("</ul></div>");c.push("<div id='pageFooter' class='page-footer'></div>");BoxContainer.setTitle("收藏夹");BoxContainer.setContent(c.join(""));M.fe.tab({dom:T.g("fffs"+SyncMgr.current_tab_index),num:SyncMgr.current_tab_index,mid:"favTab",nameSpace:_gl.oFav,update:false});if(T.browser.ie&&T.browser.ie==6){var e=T.G("JfavSign");var b=e.getElementsByTagName("li");for(var a=0;a<b.length;a++){T.on(b[a],"mouseover",function(){T.ac(this,"over");this.getElementsByTagName("span")[0].style.display="block"});T.on(b[a],"mouseout",function(){T.rc(this,"over");this.getElementsByTagName("span")[0].style.display="none"})}}},getListHtml:function(g){var h=[];for(var d=0,a=g.length;d<a;d++){var b=g[d],j=parseInt(b.type,10),c=b.data,f=_gl.getPageBeforeIndex(d),e="",k="",m="";switch(j){case 0:k=c.name;break;case 1:k=c.pathname;switch(c.pathtype){case 0:m="fav_ico_nav";break;case 1:switch(c.transkind){case 0:m="fav_ico_train";break;case 1:m="fav_ico_plane";break;default:m="fav_ico_bus";break}break;case 2:m="fav_ico_walk";break}break}k=T.trim(k);e=_gl.charStr(_gl.deFiltXss(k),35);var n=['<li onmouseover="_gl.changeFavPoiFun('+f+')">','<p title="'+k+'" class="'+m+'" onclick="Instance(\''+this.guid+"').showItem("+j+","+f+')">'+e+"</p>",'<div class="hide inputCell"><i class="hide">'+k+"</i></div>","<span>",'<a class="favDelBg" href="javascript:void(0);" onclick="_gl.deleteFavByIndex('+f+')" ></a> ',"</span>",'<div class="userSignTip hide"></div></li>'];h.push(n.join(""))}return h.join("")},showItem:function(b,a){switch(b){case 0:_gl.poiHidAndSho("show",a);break;case 1:this.showTrans(a);break}},showTrans:function(o){var B=_gl.favCloudData[o].data,y=2,c=2,t=B.curcityid,x=B.pagenumber||0,e=B.wp,A={},d="",q="",w="",D="",s="",E="",u="",n="",z="",j=B.sfavnode,g=B.efavnode,b=j.cityid,l=g.cityid,r=j.uid,p=g.uid,C=encodeURIComponent(j.name),k=encodeURIComponent(g.name);switch(B.pathtype){case 0:var h=SyncMgr.pk_dict[B.pathtype];E="nav";s=h[B.plankind].lk;break;case 1:E="bt";if(isNaN(parseInt(B.transkind,10))){var h=SyncMgr.pk_dict[B.pathtype];s=h[B.plankind].lk;if(s==4){z=getSearchTranType.busSub}A={_index:((B.busidx||0)+",1,1")}}else{n=SyncMgr.pk_dict[9][B.plankind].lk;u=B.transkind;A={_index:((B.busidx||0)+",1,1")}}break;case 2:E="walk";break}if(j.geoptx){y=1;w=j.geoptx+","+j.geopty}if(j.uid&&j.type==0){y=0}if(g.geoptx){c=1;D=g.geoptx+","+g.geopty}if(g.uid&&g.type==0){c=0}if(e&&e.length>2){for(var v=1;v<e.length-1;v++){d+="1$$$$"+e[v].p+"$$$$+to:";q+="0 +to:"}c=1}var m={c:t,sn:y+"$$"+r+"$$"+w+"$$"+C+"$$$$$$",en:d+c+"$$"+p+"$$"+D+"$$"+k+"$$$$$$",sc:b,ec:q+l,sy:s,f:z,pn:x,csy:n,cty:u};if(e&&e.length>2){m.drag=1}var a=E+"&"+jsonToQuery(m);go(a,{cinfo:A})},goPage:function(a,e){if(_gl.oFav&&!T.dom.hasClass("favBtn","span_focus")){return}var b=_gl.favCloudData,e=e||this.pageSize,h=b.length,g=Math.ceil(h/e),f=a||1,a=this.currentPageIndex=f>g?g:f,d=[],i=(a-1)*e,c=i+e;this.setFavPostData(b.slice(i,c>h?h:c));if(h<=e){return}d.push("<span ");if(a==1){d.push('class="page-disable">')}else{d.push('class="fav_pageBtn" onmouseup="this.className=\'fav_pageBtnt_over\'"  onmousedown="this.className=\'fav_pageBtn_down\'" onmouseout="this.className=\'fav_pageBtn\'" onmouseover="this.className=\'fav_pageBtn_over\'" onclick="Instance(\''+this.guid+"').goPage("+(a-1)+","+e+')">')}d.push("上一页</span>");d.push("<span ");if(a==g){d.push('class="page-disable">')}else{d.push('class="fav_pageBtn" onmouseup="this.className=\'fav_pageBtnt_over\'"  onmousedown="this.className=\'fav_pageBtn_down\'" onmouseout="this.className=\'fav_pageBtn\'" onmouseover="this.className=\'fav_pageBtn_over\'" onclick="Instance(\''+this.guid+"').goPage("+(a+1)+","+e+')">')}d.push("下一页</span>");T.G("pageFooter").innerHTML=d.join("")}});
</script>
